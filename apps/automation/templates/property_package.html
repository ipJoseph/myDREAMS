<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Property Package - {{ client_name }}</title>
    <style>
        @page {
            size: letter;
            margin: 0.5in;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.5;
            color: #333;
            margin: 0;
            padding: 0;
        }

        /* Cover Page */
        .cover-page {
            page-break-after: always;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        .cover-logo {
            max-width: 200px;
            max-height: 100px;
            margin-bottom: 40px;
        }
        .cover-title {
            font-size: 36px;
            font-weight: 700;
            color: #1a365d;
            margin-bottom: 10px;
        }
        .cover-subtitle {
            font-size: 20px;
            color: #64748b;
            margin-bottom: 40px;
        }
        .cover-client {
            font-size: 24px;
            color: #475569;
            margin-bottom: 10px;
        }
        .cover-date {
            font-size: 16px;
            color: #94a3b8;
        }
        .cover-property-count {
            margin-top: 40px;
            padding: 15px 30px;
            background: #1a365d;
            color: white;
            border-radius: 30px;
            font-size: 18px;
        }

        /* Property Card */
        .property-page {
            page-break-after: always;
            padding: 20px 0;
        }
        .property-page:last-of-type {
            page-break-after: avoid;
        }
        .property-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #1a365d;
        }
        .property-price {
            font-size: 32px;
            font-weight: 700;
            color: #1a365d;
        }
        .property-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        .status-active {
            background: #dcfce7;
            color: #166534;
        }
        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }
        .status-sold {
            background: #fee2e2;
            color: #991b1b;
        }
        .property-address {
            font-size: 20px;
            color: #475569;
            margin-bottom: 5px;
        }
        .property-location {
            font-size: 14px;
            color: #94a3b8;
        }
        .property-image-container {
            width: 100%;
            height: 300px;
            margin: 15px 0;
            border-radius: 8px;
            overflow: hidden;
            background: #f1f5f9;
        }
        .property-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .property-specs {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .spec-item {
            text-align: center;
            padding: 15px;
            background: #f8fafc;
            border-radius: 8px;
        }
        .spec-value {
            font-size: 24px;
            font-weight: 700;
            color: #1a365d;
        }
        .spec-label {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .property-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        .detail-section {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
        }
        .detail-title {
            font-size: 14px;
            font-weight: 600;
            color: #1a365d;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .detail-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .detail-list li {
            padding: 5px 0;
            border-bottom: 1px solid #e2e8f0;
            font-size: 13px;
        }
        .detail-list li:last-child {
            border-bottom: none;
        }
        .detail-list .label {
            color: #64748b;
        }
        .detail-list .value {
            color: #1a365d;
            font-weight: 500;
            float: right;
        }
        .property-description {
            margin: 20px 0;
            padding: 15px;
            background: #eff6ff;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
        }
        .property-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        .property-link {
            padding: 8px 16px;
            background: #1a365d;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 13px;
        }
        .property-notes {
            margin-top: 20px;
            padding: 15px;
            background: #fefce8;
            border-left: 4px solid #eab308;
            border-radius: 0 8px 8px 0;
        }
        .property-notes h4 {
            margin: 0 0 10px 0;
            color: #854d0e;
            font-size: 14px;
        }
        .property-notes p {
            margin: 0;
            font-size: 13px;
            color: #713f12;
        }

        /* Agent Contact Page */
        .agent-page {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .agent-photo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 20px;
            border: 4px solid #1a365d;
        }
        .agent-name {
            font-size: 28px;
            font-weight: 700;
            color: #1a365d;
            margin-bottom: 5px;
        }
        .agent-title {
            font-size: 16px;
            color: #64748b;
            margin-bottom: 20px;
        }
        .agent-brokerage {
            font-size: 18px;
            color: #475569;
            margin-bottom: 30px;
        }
        .agent-contact-info {
            margin-bottom: 30px;
        }
        .agent-contact-item {
            font-size: 16px;
            color: #475569;
            margin: 10px 0;
        }
        .agent-contact-item a {
            color: #2b6cb0;
            text-decoration: none;
        }
        .agent-message {
            max-width: 500px;
            font-size: 16px;
            color: #64748b;
            line-height: 1.6;
            font-style: italic;
        }
        .brokerage-logo {
            max-width: 180px;
            margin-top: 30px;
        }

        /* Page Numbers */
        .page-footer {
            position: fixed;
            bottom: 0.25in;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 11px;
            color: #94a3b8;
        }
    </style>
</head>
<body>
    <!-- Cover Page -->
    <div class="cover-page">
        {% if brokerage_logo %}
        <img src="{{ brokerage_logo }}" alt="{{ brokerage_name }}" class="cover-logo">
        {% endif %}
        <div class="cover-title">Property Package</div>
        <div class="cover-subtitle">Curated Selection of Homes</div>
        <div class="cover-client">Prepared for {{ client_name }}</div>
        <div class="cover-date">{{ package_date }}</div>
        <div class="cover-property-count">{{ properties|length }} Properties</div>
    </div>

    <!-- Property Pages -->
    {% for property in properties %}
    <div class="property-page">
        <div class="property-header">
            <div>
                <div class="property-price">${{ '{:,.0f}'.format(property.price) }}</div>
                <div class="property-address">{{ property.address }}</div>
                <div class="property-location">{{ property.city }}, {{ property.state }} {{ property.zip }}</div>
            </div>
            <span class="property-status status-{{ property.status|lower }}">{{ property.status }}</span>
        </div>

        {% if property.photo_url %}
        <div class="property-image-container">
            <img src="{{ property.photo_url }}" alt="{{ property.address }}" class="property-image">
        </div>
        {% endif %}

        <div class="property-specs">
            <div class="spec-item">
                <div class="spec-value">{{ property.beds }}</div>
                <div class="spec-label">Bedrooms</div>
            </div>
            <div class="spec-item">
                <div class="spec-value">{{ property.baths }}</div>
                <div class="spec-label">Bathrooms</div>
            </div>
            <div class="spec-item">
                <div class="spec-value">{{ '{:,}'.format(property.sqft) if property.sqft else 'N/A' }}</div>
                <div class="spec-label">Sq Ft</div>
            </div>
            <div class="spec-item">
                <div class="spec-value">{{ property.acreage if property.acreage else 'N/A' }}</div>
                <div class="spec-label">Acres</div>
            </div>
        </div>

        <div class="property-details">
            <div class="detail-section">
                <div class="detail-title">Property Details</div>
                <ul class="detail-list">
                    <li><span class="label">Year Built</span><span class="value">{{ property.year_built or 'N/A' }}</span></li>
                    <li><span class="label">Property Type</span><span class="value">{{ property.property_type or 'N/A' }}</span></li>
                    <li><span class="label">Style</span><span class="value">{{ property.style or 'N/A' }}</span></li>
                    <li><span class="label">MLS #</span><span class="value">{{ property.mls_number or 'N/A' }}</span></li>
                    <li><span class="label">Days on Market</span><span class="value">{{ property.days_on_market or 'N/A' }}</span></li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Features</div>
                <ul class="detail-list">
                    {% if property.views %}
                    <li><span class="label">Views</span><span class="value">{{ property.views }}</span></li>
                    {% endif %}
                    {% if property.water_features %}
                    <li><span class="label">Water</span><span class="value">{{ property.water_features }}</span></li>
                    {% endif %}
                    {% if property.heating %}
                    <li><span class="label">Heating</span><span class="value">{{ property.heating }}</span></li>
                    {% endif %}
                    {% if property.cooling %}
                    <li><span class="label">Cooling</span><span class="value">{{ property.cooling }}</span></li>
                    {% endif %}
                    {% if property.garage %}
                    <li><span class="label">Garage</span><span class="value">{{ property.garage }}</span></li>
                    {% endif %}
                </ul>
            </div>
        </div>

        {% if property.description %}
        <div class="property-description">
            {{ property.description }}
        </div>
        {% endif %}

        {% if property.agent_notes %}
        <div class="property-notes">
            <h4>Agent Notes</h4>
            <p>{{ property.agent_notes }}</p>
        </div>
        {% endif %}
    </div>
    {% endfor %}

    <!-- Agent Contact Page -->
    <div class="agent-page">
        {% if agent_headshot %}
        <img src="{{ agent_headshot }}" alt="{{ agent_name }}" class="agent-photo">
        {% endif %}
        <div class="agent-name">{{ agent_name }}</div>
        <div class="agent-title">REALTOR</div>
        <div class="agent-brokerage">{{ brokerage_name }}</div>

        <div class="agent-contact-info">
            <div class="agent-contact-item">
                <a href="mailto:{{ agent_email }}">{{ agent_email }}</a>
            </div>
            <div class="agent-contact-item">
                <a href="tel:{{ agent_phone }}">{{ agent_phone }}</a>
            </div>
        </div>

        <div class="agent-message">
            "Thank you for allowing me to help you find your perfect home.
            If you have any questions about these properties or would like to schedule showings,
            please don't hesitate to reach out. I'm here to help!"
        </div>

        {% if brokerage_logo %}
        <img src="{{ brokerage_logo }}" alt="{{ brokerage_name }}" class="brokerage-logo">
        {% endif %}
    </div>
</body>
</html>
